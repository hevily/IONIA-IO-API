var bittrex = require('node-bittrex-api');

function getbalances(API_KEY, API_SECRET) {
    bittrex.options({
        'apikey' : API_KEY,
        'apisecret' : API_SECRET,
    });
    
    // bittrex.getbalances(function (res, error){
    //     console.log(JSON.stringify(res));
    // });

    var response = {"success":true,"message":"","result":[{"Currency":"1ST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"2GIVE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"8BIT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ABY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ADA","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"DdzFFzCqrht5drEsTyrU2jVej9CXjXJti7TVYvGAmQLLtGqPoQdrPqPShXAtLKL3HYajwEudCJWF7UApouoESwJdHUKBgc45R7mF8jjH"},{"Currency":"AEON","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"AGRS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"AMP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ANT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"APX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ARDR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"e8dd6e89dd3640d08732f56c29055306a682f292c9b94e79bcf4de0edacc5d8b"},{"Currency":"ARK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"AUR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BAT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BAY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BCC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"1MBhm6T7TcNH225bbvUmRg8QfUKCvCWbZa"},{"Currency":"BCY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BITB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BLITZ","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BLK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BLOCK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BNT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BRK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BRX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BSD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BTA","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BTC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"1LZ8KUz2evEBhgSNgXtquChPRNdKF3ySfh"},{"Currency":"BTCD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BTG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BTS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BURST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"BYC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CANN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CLAM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CLOAK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CLUB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"COVAL","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CPC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CRB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CRW","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"CURE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DAR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DASH","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DCR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DGB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DGD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DMD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DOGE","Balance":831.385,"Available":831.385,"Pending":0,"CryptoAddress":"DQs7PgMRyZZB7hUp57PZQWJEeMEtNhvjNS"},{"Currency":"DOPE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DRACO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DTB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"DYN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EBST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EDG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EFL","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EGC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EMC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EMC2","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ENRG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ERC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ETC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ETH","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EXCL","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"EXP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"FAIR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"FCT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"FLDC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"FLO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"FTC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GAM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GAME","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GBG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GBYTE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GCR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GEO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GLD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GNO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GNT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GOLOS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GRC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GRS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"GUP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"HKG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"HMQ","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"IGNIS","Balance":7e-8,"Available":7e-8,"Pending":0,"CryptoAddress":null},{"Currency":"INCNT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"3PEWSPnXWAo6wEVRRX2wRwd6vzuAnJ6fWrv"},{"Currency":"INFX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"IOC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ION","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"IOP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"KMD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"KORE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"LBC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"LGD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"LMC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"LSK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"LTC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"LKUGFhS5tTVs3qHJzjF94Ki5QCrZFjKrDZ"},{"Currency":"LUN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MAID","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MEME","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MLN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MONA","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MUE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"MUSIC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NAUT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NAV","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NBT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NEO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"AZdoAoPzwrWtP84RQASDNJ8DAzbWUVMmHR"},{"Currency":"NEOS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NLG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NMR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NXC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NXS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"NXT","Balance":1.3e-7,"Available":1.3e-7,"Pending":0,"CryptoAddress":null},{"Currency":"OK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"OMG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"OMNI","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PAY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PDC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PINK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PIVX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PKB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"POT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PPC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"PTC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"QRL","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"QTUM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"QUyR3jqWHt78Z2VZ8JpjW9teQ7d68j9JZv"},{"Currency":"QWARK","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RADS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RBY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RDD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"REP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RISE","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RLC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"RVR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SAFEX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"1LkY54TnZKNWbnekSd2vBn84qEFwhAivZv"},{"Currency":"SBD","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"664b7e2a0a2b418db6f"},{"Currency":"SC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SEQ","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SHIFT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SIB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SLR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SLS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SNGLS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SNRG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SPHR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SPR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"START","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"STEEM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"STRAT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SWIFT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SWT","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SYNX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"SYS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"THC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TIME","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TKN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TKS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TRIG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TRST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TRUST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"TX","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"UBQ","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"UNB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"UNO","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"USDT","Balance":0.1815006,"Available":0.1815006,"Pending":0,"CryptoAddress":null},{"Currency":"VIA","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"VRC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"VRM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"VTC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"VTR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"WAVES","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"3PLkWehTxv3nuUdN6HpB8UZzaMcfs9AUHbL"},{"Currency":"WINGS","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XAUR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XBB","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XCP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XDN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XEM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XLM","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XMG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XMR","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XMY","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XRP","Balance":0,"Available":0,"Pending":0,"CryptoAddress":"1230742689"},{"Currency":"XST","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XVC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XVG","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XWC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"XZC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ZCL","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ZEC","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null},{"Currency":"ZEN","Balance":0,"Available":0,"Pending":0,"CryptoAddress":null}]};

    var originResult = response.result;
    var result = {};

    originResult.forEach(function(item) {
        var currencyCode = item['Currency'];
        var balance = item['Balance'];
        var available = item['Available'];
        var pending = item['Pending'];
        var cryptoAddress = item['CryptoAddress'];

        result[currencyCode.toLowerCase()] = {
            "bittrex": {
                "available": available,
                "balance": balance,
                "pending": pending,
                "address" : cryptoAddress,
                'btcValue': 0.01,
            }
        };
    });

    return result;
}

exports.getbalances = getbalances;